{"remainingRequest":"/Users/lvjing/sorcery/sorcery-front/node_modules/babel-loader/lib/index.js!/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/sorcery/sorcery-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery/sorcery-front/src/components/Apis/moduleDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery/sorcery-front/src/components/Apis/moduleDialog.vue","mtime":1684304185449},{"path":"/Users/lvjing/sorcery/sorcery-front/babel.config.js","mtime":1658125707026},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1658126181624},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/babel-loader/lib/index.js","mtime":1658126183216},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1658126181624},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/vue-loader/lib/index.js","mtime":1658126185454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY3JlYXRlTW9kdWxlIH0gZnJvbSAnQC9hcGkvbW9kdWxlcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTW9kdWxlRGlhbG9nJywKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAgcGlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHBsYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICByb290SWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHBhcmVudE9iajogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93VGl0bGU6ICcnLAogICAgICB1cGRhdGVVUkw6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiB0cnVlLAogICAgICBtb2R1bGVGb3JtOiB7CiAgICAgICAgbW9kdWxlTmFtZTogJycsCiAgICAgICAgcHJvamVjdElkOiAwLAogICAgICAgIG1vZHVsZVBhcmVudElkOiAwCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbW9kdWxlTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaooeWdl+eahOWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBmaWxlTGlzdDogW10sCiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgaW1hZ2VWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMubW9kdWxlRm9ybS5wcm9qZWN0SWQgPSB0aGlzLnBpZDsKCiAgICBpZiAodGhpcy5yb290SWQgPT09IHRydWUpIHsKICAgICAgdGhpcy5zaG93VGl0bGUgPSAn5Yib5bu65qC56IqC54K5JzsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuc2hvd1RpdGxlID0gJ+WIm+W7uuWtkOiKgueCuSc7CiAgICAgIHRoaXMubW9kdWxlRm9ybS5tb2R1bGVQYXJlbnRJZCA9IHRoaXMucGFyZW50T2JqLmlkOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICBjb25zb2xlLmxvZygnY2xvc2VEaWFsb2cnKTsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pOwogICAgfSwKICAgIC8vIOWIm+W7uuaooeWdlwogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjcmVhdGVNb2R1bGUoX3RoaXMubW9kdWxlRm9ybSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICBjb25zb2xlLmluZm8oJ+WTjeW6lOe7k+aenO+8micsIHJlc3ApOwoKICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gJzAwMDAwJykgewogICAgICAgICAgICAgIF90aGlzLmNsb3NlRGlhbG9nKCk7CgogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIm+W7uuaIkOWKn++8gScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AubXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AAEA;EACAA,oBADA;EAEAC,cAFA;EAGAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASAE;MACAH,aADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,YADA;MAEAC;IAFA;EAbA,CAHA;EAqBAI,IArBA,kBAqBA;IACA;MACAC,aADA;MAEAC,aAFA;MAGAC,mBAHA;MAIAC;QACAC,cADA;QAEAC,YAFA;QAGAC;MAHA,CAJA;MASAC;QACAH,aACA;UAAAI;UAAAC;UAAAC;QAAA,CADA;MADA,CATA;MAcAC,YAdA;MAeAC,YAfA;MAgBAC,mBAhBA;MAiBAC;IAjBA;EAmBA,CAzCA;EA0CAC,OA1CA,qBA0CA;IACA;;IACA;MACA;IACA,CAFA,MAEA;MACA;MACA;IACA;EACA,CAlDA;EAmDAC;IACAC,WADA,yBACA;MACAC;MACA;IACA,CAJA;IAKA;IACAC,UANA,sBAMAC,QANA,EAMA;MAAA;;MACA;QACA;UACAC;YACAH;;YACA;cACA;;cACA;YACA,CAHA,MAGA;cACA;YACA;UACA,CARA;QASA;MACA,CAZA;IAaA;EApBA;AAnDA","names":["name","components","props","pid","type","default","plabel","rootId","parentObj","data","showTitle","updateURL","dialogVisible","moduleForm","moduleName","projectId","moduleParentId","rules","required","message","trigger","fileList","imageUrl","imageVisible","disabled","mounted","methods","closeDialog","console","submitForm","formName","createModule"],"sourceRoot":"src/components/Apis","sources":["moduleDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"500px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"moduleForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"项目名称\" prop=\"name\">\n        <el-input v-model=\"plabel\" disabled />\n      </el-form-item>\n      <el-form-item v-if=\"parentObj.label !== undefined\" label=\"父节点\">\n        <el-input v-model=\"parentObj.label\" disabled />\n      </el-form-item>\n      <el-form-item label=\"模块名称\" prop=\"moduleName\">\n        <el-input v-model=\"moduleForm.moduleName\" />\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">取消</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"submitForm('ruleForm')\"\n        >确定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n  <!-- <el-button type=\"danger\" @click=\"closeDialog\">关闭</el-button> -->\n</template>\n\n<script>\nimport { createModule } from '@/api/modules'\n\nexport default {\n  name: 'ModuleDialog',\n  components: {},\n  props: {\n    pid: {\n      type: Number,\n      default: 1\n    },\n    plabel: {\n      type: String,\n      default: null\n    },\n    rootId: {\n      type: Boolean,\n      default: true\n    },\n    parentObj: {\n      type: Object,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      updateURL: '',\n      dialogVisible: true,\n      moduleForm: {\n        moduleName: '',\n        projectId: 0,\n        moduleParentId: 0\n      },\n      rules: {\n        moduleName: [\n          { required: true, message: '请输入模块的名称', trigger: 'blur' }\n        ]\n      },\n      fileList: [],\n      imageUrl: '',\n      imageVisible: false,\n      disabled: false\n    }\n  },\n  mounted() {\n    this.moduleForm.projectId = this.pid\n    if (this.rootId === true) {\n      this.showTitle = '创建根节点'\n    } else {\n      this.showTitle = '创建子节点'\n      this.moduleForm.moduleParentId = this.parentObj.id\n    }\n  },\n  methods: {\n    closeDialog() {\n      console.log('closeDialog')\n      this.$emit('cancel', {})\n    },\n    // 创建模块\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          createModule(this.moduleForm).then((resp) => {\n            console.info('响应结果：', resp)\n            if (resp.code === '00000') {\n              this.closeDialog()\n              this.$message.success('创建成功！')\n            } else {\n              this.$message.error(resp.msg)\n            }\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\ntext-align: left;\n}\n</style>\n"]}]}