{"remainingRequest":"/Users/lvjing/sorcery/sorcery-front/node_modules/babel-loader/lib/index.js!/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/sorcery/sorcery-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery/sorcery-front/src/components/Projects/projectDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery/sorcery-front/src/components/Projects/projectDialog.vue","mtime":1683874640881},{"path":"/Users/lvjing/sorcery/sorcery-front/babel.config.js","mtime":1658125707026},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1658126181624},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/babel-loader/lib/index.js","mtime":1658126183216},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1658126181624},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/vue-loader/lib/index.js","mtime":1658126185454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2x2amluZy9zb3JjZXJ5L3NvcmNlcnktZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbHZqaW5nL3NvcmNlcnkvc29yY2VyeS1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRQcm9qZWN0LCBjcmVhdGVQcm9qZWN0LCB1cGRhdGVQcm9qZWN0IH0gZnJvbSAnQC9hcGkvcHJvamVjdHMnOwppbXBvcnQgeyB1cGxvYWRGaWxlIH0gZnJvbSAnQC9hcGkvdXBsb2Fkcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUG9yamVjdERpYWxvZycsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHBpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiB0cnVlLAogICAgICBzaG93VGl0bGU6ICcnLAogICAgICB1cGRhdGVVUkw6ICcnLAogICAgICBwcm9qZWN0Rm9ybTogewogICAgICAgIC8vIOmhueebruWQjeensAogICAgICAgIHByb2plY3ROYW1lOiAnJywKICAgICAgICAvLyDpobnnm67mj4/ov7AKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgLy8g5LiK5Lyg5Zu+54mHCiAgICAgICAgaW1hZ2U6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcHJvamVjdE5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXpobnnm67nmoTlkI3np7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICAvLyDnjrDmnInlm77niYfliJfooagKICAgICAgaW1hZ2VVcmw6ICcnLAogICAgICAvLyDlm77niYfot6/lvoQKICAgICAgaW1hZ2VWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLnRpdGxlID09PSAnY3JlYXRlJykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfliJvlu7rpobnnm64nOwogICAgfSBlbHNlIGlmICh0aGlzLnRpdGxlID09PSAnZGV0YWlsJykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfpobnnm67or6bmg4UnOwogICAgICB0aGlzLmluaXRQcm9qZWN0RGV0YWlsKCk7CiAgICB9IGVsc2UgaWYgKHRoaXMudGl0bGUgPT09ICdlZGl0JykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfnvJbovpHpobnnm64nOwogICAgICB0aGlzLmluaXRQcm9qZWN0RGV0YWlsKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJvlu7rpobnnm64KICAgIHN1Ym1pdFByb2plY3Q6IGZ1bmN0aW9uIHN1Ym1pdFByb2plY3QoZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKF90aGlzLnRpdGxlID09PSAnY3JlYXRlJykgewogICAgICAgICAgICBjcmVhdGVQcm9qZWN0KF90aGlzLnByb2plY3RGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgLy8gY29kZe+8micwMDAwMCfooajnpLrmiJDlip8KICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAnMDAwMDAnKSB7CiAgICAgICAgICAgICAgICAvLyDliJvlu7rmiJDlip/vvIzlhbPpl63lvLnnqpcKICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlRGlhbG9nKCk7CgogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6aG555uu5Yib5bu65oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMudGl0bGUgPT09ICdlZGl0JykgewogICAgICAgICAgICB1cGRhdGVQcm9qZWN0KF90aGlzLnBpZCwgX3RoaXMucHJvamVjdEZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAnMDAwMDAnKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZURpYWxvZygpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+mhueebrue8lui+keaIkOWKn++8gScpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagueaNrumhueebrklk5p+l6K+i6aG555uu6K+m5oOFCiAgICBpbml0UHJvamVjdERldGFpbDogZnVuY3Rpb24gaW5pdFByb2plY3REZXRhaWwoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRQcm9qZWN0KF90aGlzMi5waWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAnMDAwMDAnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5wcm9qZWN0Rm9ybSA9IHJlc3AuZGF0YTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi5maWxlTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXNwLmRhdGEuaW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgdXJsOiByZXNwLmRhdGEuaW1hZ2UKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczIuaW1hZ2VVcmwgPSByZXNwLmRhdGEuaW1hZ2U7CgogICAgICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn6aG555uu6K+m5oOF5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoJ+mhueebruivpuaDheWksei0pe+8gScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5Yig6Zmk5Zu+54mHCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKCfliKDpmaQnLCBmaWxlKTsKICAgIH0sCiAgICAvLyDpooTop4jlm77niYcKICAgIGhhbmRsZVByZXZpZXc6IGZ1bmN0aW9uIGhhbmRsZVByZXZpZXcoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaIkOWKnycsIGZpbGUsIGZpbGVMaXN0KTsKICAgICAgdGhpcy5pbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmltYWdlVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g5LiK5Lyg5paH5Lu2CiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGZiLCByZXNwLCBpbWFnZVBhdGgsIGltYWdlSW5mbzsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaWh+S7tuWvueixoScsIGZpbGUpOwogICAgICAgICAgICAgICAgZmIgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZiLmFwcGVuZCgnZmlsZScsIGZpbGUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZEZpbGUoZmIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzcC0tPicsIHJlc3ApOwoKICAgICAgICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT09ICcwMDAwMCcpIHsKICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5paH5Lu25ZCNCiAgICAgICAgICAgICAgICAgIF90aGlzMy5wcm9qZWN0Rm9ybS5pbWFnZSA9IHJlc3AuZGF0YTsgLy8g5ou85o6l6Z2Z5oCB5paH5Lu26Lev5b6E77yM55So5LqO5Zu+54mH5bGV56S6CgogICAgICAgICAgICAgICAgICBpbWFnZVBhdGggPSByZXNwLmRhdGE7CiAgICAgICAgICAgICAgICAgIGltYWdlSW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBpbWFnZVBhdGgKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5maWxlTGlzdC5wdXNoKGltYWdlSW5mbyk7CgogICAgICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygn5LiK5Lyg5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5aSx6LSlJywgcmVzcCk7CgogICAgICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5YWz6Zet57uE5Lu2CiAgICBjbG9zZURpYWxvZzogZnVuY3Rpb24gY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcsIHt9KTsKICAgIH0sCiAgICAvLyDopobnm5bpu5jorqTnmoTkuIrkvKDooYzkuLrvvIzlj6/ku6Xoh6rlrprkuYnkuIrkvKDnmoTlrp7njrDvvIzpgb/lhY3kvb/nlKjmoYbmnrboh6rliqjkuIrkvKDlip/og70KICAgIGh0dHBSZXF1ZXN0OiBmdW5jdGlvbiBodHRwUmVxdWVzdCgpIHt9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AAEA;EACAA,qBADA;EAEAC,cAFA;EAGAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA;EALA,CAHA;EAaAE,IAbA,kBAaA;IACA;MACAC,mBADA;MAEAC,aAFA;MAGAC,aAHA;MAIAC;QACA;QACAC,eAFA;QAGA;QACAC,eAJA;QAKA;QACAC;MANA,CAJA;MAYAC;QACAH,cACA;UAAAI;UAAAC;UAAAC;QAAA,CADA;MADA,CAZA;MAiBAC,YAjBA;MAiBA;MACAC,YAlBA;MAkBA;MACAC,mBAnBA;MAoBAC;IApBA;EAsBA,CApCA;EAqCAC,OArCA,qBAqCA;IACA;MACA;IACA,CAFA,MAEA;MACA;MACA;IACA,CAHA,MAGA;MACA;MACA;IACA;EACA,CA/CA;EAgDAC;IACA;IACAC,aAFA,yBAEAC,QAFA,EAEA;MAAA;;MACA;QACA;UACA;YACAC;cACA;cACA;gBACA;gBACA;;gBACA;cACA,CAJA,MAIA;gBACA;cACA;YACA,CATA;UAUA,CAXA,MAWA;YACAC;cACA;gBACA;;gBACA;cACA,CAHA,MAGA;gBACA;cACA;YACA,CAPA;UAQA;QACA,CAtBA,MAsBA;UACA;QACA;MACA,CA1BA;IA2BA,CA9BA;IA+BA;IACAC,iBAhCA,+BAgCA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC,sBADA;;cAAA;gBACAC,IADA;;gBAEA;kBACA;;kBACA;oBACA/B,qBADA;oBAEAgC;kBAFA;;kBAIA;;kBACA;gBACA,CARA,MAQA;kBACA;gBACA;;cAZA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAaA,CA7CA;IA8CA;IACAC,YA/CA,wBA+CAC,IA/CA,EA+CA;MACAC;IACA,CAjDA;IAkDA;IACAC,aAnDA,yBAmDAF,IAnDA,EAmDAf,QAnDA,EAmDA;MACAgB;MACA;MACA;IACA,CAvDA;IAwDA;IACAE,YAzDA,wBAyDAH,IAzDA,EAyDA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAG,EAFA,GAEA,cAFA;gBAGAA;gBAHA;gBAAA,OAIAC,cAJA;;cAAA;gBAIAR,IAJA;gBAKAI;;gBACA;kBACA;kBACA,qCAFA,CAGA;;kBACAK,SAJA,GAIAT,SAJA;kBAKAU,SALA,GAKA;oBACAzC,eADA;oBAEAgC;kBAFA,CALA;;kBASA;;kBACA;gBACA,CAXA,MAWA;kBACAG;;kBACA;gBACA;;cApBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAqBA,CA9EA;IA+EA;IACAO,WAhFA,yBAgFA;MACA;IACA,CAlFA;IAmFA;IACAC,WApFA,yBAoFA;EApFA;AAhDA","names":["name","components","props","title","type","default","pid","data","dialogVisible","showTitle","updateURL","projectForm","projectName","description","image","rules","required","message","trigger","fileList","imageUrl","imageVisible","disabled","mounted","methods","submitProject","formName","createProject","updateProject","initProjectDetail","getProject","resp","url","handleRemove","file","console","handlePreview","beforeUpload","fb","uploadFile","imagePath","imageInfo","closeDialog","httpRequest"],"sourceRoot":"src/components/Projects","sources":["projectDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"500px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      v-if=\"title == 'detail'\"\n      ref=\"ruleForm\"\n      :model=\"projectForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"项目名称\" prop=\"projectName\">{{ projectForm.projectName }}</el-form-item>\n      <el-form-item label=\"项目描述\" prop=\"description\">{{ projectForm.description }}</el-form-item>\n      <el-form-item label=\"图片\" prop=\"image\">\n        <div id=\"image\">\n          <el-image\n            style=\"width: 100px; height: 100px\"\n            :src=\"imageUrl\"\n          />\n        </div>\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">返回</el-button>\n      </el-form-item>\n    </el-form>\n    <el-form\n      v-if=\"title != 'detail'\"\n      ref=\"ruleForm\"\n      :model=\"projectForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"项目名称\" prop=\"name\">\n        <el-input v-model=\"projectForm.projectName\" />\n      </el-form-item>\n      <el-form-item label=\"项目描述\" prop=\"desc\">\n        <el-input v-model=\"projectForm.description\" type=\"textarea\" />\n      </el-form-item>\n      <el-form-item label=\"图片\" prop=\"desc\">\n        <div id=\"image\">\n          <el-upload\n            action=\"#\"\n            :before-upload=\"beforeUpload\"\n            :http-request=\"httpRequest\"\n            list-type=\"picture-card\"\n            :on-preview=\"handlePreview\"\n            :on-remove=\"handleRemove\"\n            :file-list=\"fileList\"\n          >\n            <i class=\"el-icon-plus\" />\n          </el-upload>\n          <el-dialog :visible.sync=\"imageVisible\">\n            <img width=\"100%\" :src=\"imageUrl\" alt=\"\">\n          </el-dialog>\n        </div>\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">取消</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"submitProject('ruleForm')\"\n        >确定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { getProject, createProject, updateProject } from '@/api/projects'\nimport { uploadFile } from '@/api/uploads'\n\nexport default ({\n  name: 'PorjectDialog',\n  components: {},\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    pid: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      dialogVisible: true,\n      showTitle: '',\n      updateURL: '',\n      projectForm: {\n        // 项目名称\n        projectName: '',\n        // 项目描述\n        description: '',\n        // 上传图片\n        image: ''\n      },\n      rules: {\n        projectName: [\n          { required: true, message: '请输入项目的名称', trigger: 'blur' }\n        ]\n      },\n      fileList: [], // 现有图片列表\n      imageUrl: '', // 图片路径\n      imageVisible: false,\n      disabled: false\n    }\n  },\n  mounted() {\n    if (this.title === 'create') {\n      this.showTitle = '创建项目'\n    } else if (this.title === 'detail') {\n      this.showTitle = '项目详情'\n      this.initProjectDetail()\n    } else if (this.title === 'edit') {\n      this.showTitle = '编辑项目'\n      this.initProjectDetail()\n    }\n  },\n  methods: {\n    // 创建项目\n    submitProject(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.title === 'create') {\n            createProject(this.projectForm).then((resp) => {\n              // code：'00000'表示成功\n              if (resp.code === '00000') {\n                // 创建成功，关闭弹窗\n                this.closeDialog()\n                this.$message.success('项目创建成功！')\n              } else {\n                this.$message.error(resp.data)\n              }\n            })\n          } else if (this.title === 'edit') {\n            updateProject(this.pid, this.projectForm).then((resp) => {\n              if (resp.code === '00000') {\n                this.closeDialog()\n                this.$message.success('项目编辑成功！')\n              } else {\n                this.$message.error(resp.error.data)\n              }\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    // 根据项目Id查询项目详情\n    async initProjectDetail() {\n      const resp = await getProject(this.pid)\n      if (resp.code === '00000') {\n        this.projectForm = resp.data\n        this.fileList.push({\n          name: resp.data.image,\n          url: resp.data.image\n        })\n        this.imageUrl = resp.data.image\n        this.$message.success('项目详情成功！')\n      } else {\n        this.$message.error('项目详情失败！')\n      }\n    },\n    // 删除图片\n    handleRemove(file) {\n      console.log('删除', file)\n    },\n    // 预览图片\n    handlePreview(file, fileList) {\n      console.log('上传成功', file, fileList)\n      this.imageUrl = file.url\n      this.imageVisible = true\n    },\n    // 上传文件\n    async beforeUpload(file) {\n      console.log('上传文件对象', file)\n      const fb = new FormData()\n      fb.append('file', file)\n      const resp = await uploadFile(fb)\n      console.log('resp-->', resp)\n      if (resp.code === '00000') {\n        // 获取文件名\n        this.projectForm.image = resp.data\n        // 拼接静态文件路径，用于图片展示\n        const imagePath = resp.data\n        const imageInfo = {\n          name: file.name,\n          url: imagePath\n        }\n        this.fileList.push(imageInfo)\n        this.$message.success('上传成功！')\n      } else {\n        console.log('上传失败', resp)\n        this.$message.error(resp.error.message)\n      }\n    },\n    // 关闭组件\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    // 覆盖默认的上传行为，可以自定义上传的实现，避免使用框架自动上传功能\n    httpRequest() {}\n  }\n})\n</script>\n"]}]}