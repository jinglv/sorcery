{"remainingRequest":"/Users/lvjing/sorcery/sorcery-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery/sorcery-front/src/components/Jenkins/jenkinsDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery/sorcery-front/src/components/Jenkins/jenkinsDialog.vue","mtime":1684311874483},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1658126181624},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/babel-loader/lib/index.js","mtime":1658126183216},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1658126181624},{"path":"/Users/lvjing/sorcery/sorcery-front/node_modules/vue-loader/lib/index.js","mtime":1658126185454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEplbmtpbnNJbmZvQnlJZCwgY3JlYXRlSmVua2luc0luZm8sIHVwZGF0ZUplbmtpbnNJbmZvIH0gZnJvbSAnQC9hcGkvamVua2lucycKCmV4cG9ydCBkZWZhdWx0ICh7CiAgbmFtZTogJ1BvcmplY3REaWFsb2cnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7CiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBwaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgc2hvd1RpdGxlOiAnJywKICAgICAgamVua2luc0Zvcm06IHsKICAgICAgICBqZW5raW5zTmFtZTogJycsCiAgICAgICAgamVua2luc1VzZXJuYW1lOiAnJywKICAgICAgICBqZW5raW5zUGFzc3dvcmQ6ICcnLAogICAgICAgIGplbmtpbnNVcmw6ICcnLAogICAgICAgIHJlbWFyazogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBqZW5raW5zTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpUplbmtpbnPlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgamVua2luc1VybDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpUplbmtpbnPln7rnoYDlnLDlnYAnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgamVua2luc1VzZXJuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWlSmVua2luc+iupOivgeeZu+W9leeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBqZW5raW5zUGFzc3dvcmQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaVKZW5raW5z6K6k6K+B55m75b2V5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIGZpbGVMaXN0OiBbXSwgLy8g546w5pyJ5Zu+54mH5YiX6KGoCiAgICAgIGltYWdlVXJsOiAnJywgLy8g5Zu+54mH6Lev5b6ECiAgICAgIGltYWdlVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLnRpdGxlID09PSAnY3JlYXRlJykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfliJvlu7pKZW5raW5z5L+h5oGvJwogICAgfSBlbHNlIGlmICh0aGlzLnRpdGxlID09PSAnZGV0YWlsJykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICdKZW5raW5z6K+m5oOF6K+m5oOFJwogICAgICB0aGlzLmluaXRKZW5raW5zSW5mb0RldGFpbCgpCiAgICB9IGVsc2UgaWYgKHRoaXMudGl0bGUgPT09ICdlZGl0JykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfnvJbovpFKZW5raW5z5L+h5oGvJwogICAgICB0aGlzLmluaXRKZW5raW5zSW5mb0RldGFpbCgpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJvlu7rpobnnm64KICAgIHN1Ym1pdEplbmtpbnMoZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy50aXRsZSA9PT0gJ2NyZWF0ZScpIHsKICAgICAgICAgICAgY3JlYXRlSmVua2luc0luZm8odGhpcy5qZW5raW5zRm9ybSkudGhlbigocmVzcCkgPT4gewogICAgICAgICAgICAgIC8vIGNvZGXvvJonMDAwMDAn6KGo56S65oiQ5YqfCiAgICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gJzAwMDAwJykgewogICAgICAgICAgICAgICAgLy8g5Yib5bu65oiQ5Yqf77yM5YWz6Zet5by556qXCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnSmVua2luc+S/oeaBr+WIm+W7uuaIkOWKn++8gScpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5tc2cpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRpdGxlID09PSAnZWRpdCcpIHsKICAgICAgICAgICAgdXBkYXRlSmVua2luc0luZm8odGhpcy5waWQsIHRoaXMuamVua2luc0Zvcm0pLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAnMDAwMDAnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnSmVua2luc+S/oeaBr+e8lui+keaIkOWKn++8gScpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5kYXRhKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIC8vIOagueaNrumhueebrklk5p+l6K+i6aG555uu6K+m5oOFCiAgICBhc3luYyBpbml0SmVua2luc0luZm9EZXRhaWwoKSB7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBnZXRKZW5raW5zSW5mb0J5SWQodGhpcy5waWQpCiAgICAgIGlmIChyZXNwLmNvZGUgPT09ICcwMDAwMCcpIHsKICAgICAgICB0aGlzLmplbmtpbnNGb3JtID0gcmVzcC5kYXRhCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCdKZW5raW5z5L+h5oGv6K+m5oOF5oiQ5Yqf77yBJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdKZW5raW5z5L+h5oGv6K+m5oOF5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOWFs+mXree7hOS7tgogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcsIHt9KQogICAgfQogIH0KfSkK"},{"version":3,"sources":["jenkinsDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"jenkinsDialog.vue","sourceRoot":"src/components/Jenkins","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"800px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      v-if=\"title == 'detail'\"\n      :model=\"jenkinsForm\"\n      label-width=\"auto\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"Jenkins名称:\" prop=\"jenkinsName\">{{ jenkinsForm.jenkinsName }}</el-form-item>\n      <el-form-item label=\"Jenkins基础地址:\" prop=\"jenkinsUrl\">{{ jenkinsForm.jenkinsUrl }}</el-form-item>\n      <el-form-item label=\"Jenkins认证登录用户名:\" prop=\"jenkinsUsername\">{{ jenkinsForm.jenkinsUsername }}</el-form-item>\n      <el-form-item label=\"Jenkins认证登录密码:\" prop=\"jenkinsPassword\">{{ jenkinsForm.jenkinsPassword }}</el-form-item>\n      <el-form-item type=\"textarea\" label=\"备注:\">{{ jenkinsForm.remark }}</el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">返回</el-button>\n      </el-form-item>\n    </el-form>\n    <el-form\n      v-if=\"title != 'detail'\"\n      ref=\"ruleForm\"\n      :model=\"jenkinsForm\"\n      :rules=\"rules\"\n      label-width=\"auto\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"Jenkins名称\" prop=\"jenkinsName\">\n        <el-input v-model=\"jenkinsForm.jenkinsName\" />\n      </el-form-item>\n      <el-form-item label=\"Jenkins基础地址\" prop=\"jenkinsUrl\">\n        <el-input v-model=\"jenkinsForm.jenkinsUrl\" />\n      </el-form-item>\n      <el-form-item label=\"Jenkins认证登录用户名\" prop=\"jenkinsUsername\">\n        <el-input v-model=\"jenkinsForm.jenkinsUsername\" />\n      </el-form-item>\n      <el-form-item label=\"Jenkins认证登录密码\" prop=\"jenkinsPassword\">\n        <el-input v-model=\"jenkinsForm.jenkinsPassword\" />\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"remark\">\n        <el-input v-model=\"jenkinsForm.remark\" type=\"textarea\" />\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">取消</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"submitJenkins('ruleForm')\"\n        >确定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { getJenkinsInfoById, createJenkinsInfo, updateJenkinsInfo } from '@/api/jenkins'\n\nexport default ({\n  name: 'PorjectDialog',\n  components: {},\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    pid: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      dialogVisible: true,\n      showTitle: '',\n      jenkinsForm: {\n        jenkinsName: '',\n        jenkinsUsername: '',\n        jenkinsPassword: '',\n        jenkinsUrl: '',\n        remark: ''\n      },\n      rules: {\n        jenkinsName: [\n          { required: true, message: '请输入Jenkins名称', trigger: 'blur' }\n        ],\n        jenkinsUrl: [\n          { required: true, message: '请输入Jenkins基础地址', trigger: 'blur' }\n        ],\n        jenkinsUsername: [\n          { required: true, message: '请输入Jenkins认证登录用户名', trigger: 'blur' }\n        ],\n        jenkinsPassword: [\n          { required: true, message: '请输入Jenkins认证登录密码', trigger: 'blur' }\n        ]\n      },\n      fileList: [], // 现有图片列表\n      imageUrl: '', // 图片路径\n      imageVisible: false,\n      disabled: false\n    }\n  },\n  mounted() {\n    if (this.title === 'create') {\n      this.showTitle = '创建Jenkins信息'\n    } else if (this.title === 'detail') {\n      this.showTitle = 'Jenkins详情详情'\n      this.initJenkinsInfoDetail()\n    } else if (this.title === 'edit') {\n      this.showTitle = '编辑Jenkins信息'\n      this.initJenkinsInfoDetail()\n    }\n  },\n  methods: {\n    // 创建项目\n    submitJenkins(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.title === 'create') {\n            createJenkinsInfo(this.jenkinsForm).then((resp) => {\n              // code：'00000'表示成功\n              if (resp.code === '00000') {\n                // 创建成功，关闭弹窗\n                this.closeDialog()\n                this.$message.success('Jenkins信息创建成功！')\n              } else {\n                this.$message.error(resp.msg)\n              }\n            })\n          } else if (this.title === 'edit') {\n            updateJenkinsInfo(this.pid, this.jenkinsForm).then((resp) => {\n              if (resp.code === '00000') {\n                this.closeDialog()\n                this.$message.success('Jenkins信息编辑成功！')\n              } else {\n                this.$message.error(resp.error.data)\n              }\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    // 根据项目Id查询项目详情\n    async initJenkinsInfoDetail() {\n      const resp = await getJenkinsInfoById(this.pid)\n      if (resp.code === '00000') {\n        this.jenkinsForm = resp.data\n        this.$message.success('Jenkins信息详情成功！')\n      } else {\n        this.$message.error('Jenkins信息详情失败！')\n      }\n    },\n    // 关闭组件\n    closeDialog() {\n      this.$emit('cancel', {})\n    }\n  }\n})\n</script>\n"]}]}